{"ast":null,"code":"var _jsxFileName = \"/Users/nicolasbugdaci/Websites Local/twitch-clone-react/src/Components/TopStreams/TopStreams.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport api from \"../../api\";\nimport { Link } from \"react-router-dom\";\n\nfunction TopStreams() {\n  const [channels, setChannels] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await api.get(\"https://api.twitch.tv/helix/streams\");\n      let dataArray = result.data.data;\n      console.log(dataArray);\n      let gameIDs = dataArray.map(stream => {\n        return stream.game_id;\n      });\n      let userIDs = dataArray.map(stream => {\n        return stream.user_id;\n      }); // console.log(gameIDs, userIDs);\n      // Création des URLs personnalisés\n\n      let baseUrlGames = \"https://api.twitch.tv/helix/games?\";\n      let baseUrlUsers = \"https://api.twitch.tv/helix/users?\";\n      let queryParamsGame = \"\";\n      let queryParamsUsers = \"\";\n      gameIDs.map(id => {\n        return queryParamsGame = queryParamsGame + `id=${id}&`;\n      });\n      userIDs.map(id => {\n        return queryParamsUsers = queryParamsUsers + `id=${id}&`;\n      }); // url final\n\n      let urlFinalGames = baseUrlGames + queryParamsGame;\n      let urlFinalUsers = baseUrlUsers + queryParamsUsers; // console.log(urlFinalGames);\n      // appel\n\n      let gamesNames = await api.get(urlFinalGames);\n      let getUsers = await api.get(urlFinalUsers);\n      let gamesNameArray = gamesNames.data.data;\n      let arrayUsers = getUsers.data.data; // console.log(arrayUsers, gamesNameArray);\n      // création du tableau final\n\n      let finalArray = dataArray.map(stream => {\n        stream.gameName = \"\";\n        stream.login = \"\";\n        gamesNameArray.forEach(name => {\n          arrayUsers.forEach(user => {\n            if (stream.user_id === user.id && stream.game_id === name.id) {\n              stream.truePic = user.profile_image_url;\n              stream.gameName = name.name;\n              stream.login = user.login;\n            }\n          });\n        });\n        let newUrl = stream.thumbnail_url.replace(\"{width}\", \"320\").replace(\"{height}\", \"180\");\n        stream.thumbnail_url = newUrl;\n        return stream;\n      });\n      setChannels(finalArray);\n    };\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"titreGames\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, \"Stream les plus populaires\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexAccueil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, channels.map((channel, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"carteStream\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: channel.thumbnail_url,\n    className: \"imgCarte\",\n    alt: \"jeu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cardBodyStream\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"titreCartesStream\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, channel.user_name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"txtStream\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, \"Jeu : \", channel.gameName), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"txtStream viewers\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, \"Viewers : \", channel.viewer_count), /*#__PURE__*/React.createElement(Link, {\n    className: \"lien\",\n    to: {\n      pathname: `/live/${channel.login}`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btnCarte\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Regarder \", channel.user_name)))))));\n}\n\nexport default TopStreams;","map":{"version":3,"sources":["/Users/nicolasbugdaci/Websites Local/twitch-clone-react/src/Components/TopStreams/TopStreams.jsx"],"names":["React","useEffect","useState","api","Link","TopStreams","channels","setChannels","fetchData","result","get","dataArray","data","console","log","gameIDs","map","stream","game_id","userIDs","user_id","baseUrlGames","baseUrlUsers","queryParamsGame","queryParamsUsers","id","urlFinalGames","urlFinalUsers","gamesNames","getUsers","gamesNameArray","arrayUsers","finalArray","gameName","login","forEach","name","user","truePic","profile_image_url","newUrl","thumbnail_url","replace","channel","index","user_name","viewer_count","pathname"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport api from \"../../api\";\nimport { Link } from \"react-router-dom\";\n\nfunction TopStreams() {\n  const [channels, setChannels] = useState([]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await api.get(\"https://api.twitch.tv/helix/streams\");\n\n      let dataArray = result.data.data;\n      console.log(dataArray);\n\n      let gameIDs = dataArray.map(stream => {\n        return stream.game_id;\n      });\n      let userIDs = dataArray.map(stream => {\n        return stream.user_id;\n      });\n      // console.log(gameIDs, userIDs);\n\n      // Création des URLs personnalisés\n\n      let baseUrlGames = \"https://api.twitch.tv/helix/games?\";\n      let baseUrlUsers = \"https://api.twitch.tv/helix/users?\";\n\n      let queryParamsGame = \"\";\n      let queryParamsUsers = \"\";\n\n      gameIDs.map(id => {\n        return (queryParamsGame = queryParamsGame + `id=${id}&`);\n      });\n      userIDs.map(id => {\n        return (queryParamsUsers = queryParamsUsers + `id=${id}&`);\n      });\n\n      // url final\n      let urlFinalGames = baseUrlGames + queryParamsGame;\n      let urlFinalUsers = baseUrlUsers + queryParamsUsers;\n      // console.log(urlFinalGames);\n\n      // appel\n      let gamesNames = await api.get(urlFinalGames);\n      let getUsers = await api.get(urlFinalUsers);\n\n      let gamesNameArray = gamesNames.data.data;\n      let arrayUsers = getUsers.data.data;\n      // console.log(arrayUsers, gamesNameArray);\n\n      // création du tableau final\n      let finalArray = dataArray.map(stream => {\n        stream.gameName = \"\";\n        stream.login = \"\";\n\n        gamesNameArray.forEach(name => {\n          arrayUsers.forEach(user => {\n            if (stream.user_id === user.id && stream.game_id === name.id) {\n              stream.truePic = user.profile_image_url;\n              stream.gameName = name.name;\n              stream.login = user.login;\n            }\n          });\n        });\n\n        let newUrl = stream.thumbnail_url\n          .replace(\"{width}\", \"320\")\n          .replace(\"{height}\", \"180\");\n        stream.thumbnail_url = newUrl;\n\n        return stream;\n      });\n\n      setChannels(finalArray);\n    };\n\n    fetchData();\n  }, []);\n\n  return (\n    <div>\n      <h1 className=\"titreGames\">Stream les plus populaires</h1>\n\n      <div className=\"flexAccueil\">\n        {channels.map((channel, index) => (\n          <div key={index} className=\"carteStream\">\n            <img src={channel.thumbnail_url} className=\"imgCarte\" alt=\"jeu\" />\n\n            <div className=\"cardBodyStream\">\n              <h5 className=\"titreCartesStream\">{channel.user_name}</h5>\n              <p className=\"txtStream\">Jeu : {channel.gameName}</p>\n\n              <p className=\"txtStream viewers\">\n                Viewers : {channel.viewer_count}\n              </p>\n\n              <Link\n                className=\"lien\"\n                to={{\n                  pathname: `/live/${channel.login}`\n                }}\n              >\n                <div className=\"btnCarte\">Regarder {channel.user_name}</div>\n              </Link>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default TopStreams;\n"]},"metadata":{},"sourceType":"module"}